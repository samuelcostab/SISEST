{% extends "index.html" %}
{% block content -%}
    <section id="controleEstacionamento">
        <div class="container">
            <h1 class="col-12 text-center mb-3 text-primary">Controle de Estacionamento</h1>
            <hr>
            <div class="row">
                <div class="col-6">
                    <table class="table table-responsive table-hover">
                        <caption>Lista de Entradas</caption>
                        <thead>
                            <tr>
                                <th scope="col">ID</th>
                                <th scope="col">P.Veículo</th>
                                <th scope="col">ID Vaga</th>
                                <th scope="col">Entrada</th>
                                <th scope="col">Sair</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for ticket in tickets %}
                            <tr>
                                <td>{{ ticket.id}}</td>
                                <td>{{ ticket.vehicle_plate}}</td>
                                <td>{{ ticket.id_vaga}}</td>
                                <td>{{ ticket.arrival_time.date()}} {{ ticket.arrival_time.hour}}:{{ ticket.arrival_time.minute}}  </td>
                                <td><a data-toggle="modal" data-target="#myModal{{ ticket.id }}" ><i class="fas fa-sign-out-alt"></i></a></td>
                            </tr>
                            {% endfor %}

                        </tbody>
                    </table>
                </div>
                {% for ticket in tickets %}
                <!-- Modal -->
                <div class="modal fade" id="myModal{{ ticket.id }}" role="dialog">
                    <div class="modal-dialog">

                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title">Ticket de Estacionamento</h4>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>
                        <div class="modal-body">
                            <table class="table table-responsive table-hover">
                                <thead>
                                        <tr>
                                            <th scope="col">ID</th>
                                            <th scope="col">P.Veículo</th>
                                            <th scope="col">ID Vaga</th>
                                            <th scope="col">Entrada</th>
                                            <th scope="col">Custo</th>
                                        </tr>
                                    </thead>
                                    <tbody>                    
                                        <tr>
                                            <td>{{ ticket.id}}</td>
                                            <td>{{ ticket.vehicle_plate}}</td>
                                            <td>{{ ticket.id_vaga}}</td>
                                            <td>{{ ticket.arrival_time.date()}} {{ ticket.arrival_time.hour}}:{{ ticket.arrival_time.minute}}</td>
                                            <td>R$ 0,00 </td>
                                        </tr>
                                    </tbody>
                            </table>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-success" data-dismiss="modal">Confirmar</button>
                        </div>
                    </div>                
                </div>
                </div>
                {% endfor %}

                <div class="col-4 ml-auto">
                    <h4>Entrada no Estacionamento</h4>
                    <hr>
                    <form action="{{ url_for('.adicionaTicket') }}" method="POST">
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="inputNomeCliente">Nome Cliente</label>
                                <input type="text" class="form-control" name="inputNomeCliente" id="input1" placeholder="Cliente">                                
                                <label for="inputPlacaVeiculo">Número Contato</label>
                                <input type="text" class="form-control" name="inputNumeroContato" id="input2" placeholder="(xx)0000-0000">
                            </div>
                            <div class="form-group col-md-6">
                                <label for="inputEmail4">Email</label>
                                <input type="email" class="form-control" name="inputEmail" id="input3" placeholder="Email">
                            </div>
                        </div>
                        <hr>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="inputTipoVeiculo">Veículo</label>
                                <select name="inputTipoVeiculo" id="input4" class="form-control">
                                    <option >Automóvel</option>
                                    <option>Motocicleta</option>
                                </select>
                            </div>
                            <div class="form-group col-md-6">
                                <label for="inputPlacaVeiculo">Placa Veículo</label>
                                <input type="text" class="form-control" name="inputPlacaVeiculo" id="input5" placeholder="XXX-NNNN">
                            </div>
                        </div>
                        <hr>

                        <div class="col-lg-12 my-2" style="text-align: right;">
                                <button type="submit" value="btnEntrada" class="btn btn-success">Entrada</button>
                        </div>
                    </form>

                </div>
            </div>
        </div>


    </section>
<section id="modal">
        <div class="modal fade" id="myModal">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button aria-hidden="true" class="close" data-dismiss="modal" type="button">X</button>
                        <h4 class="modal-title">Ticket de Estacionamento</h4>
                    </div>
                    <div class="modal-body">
                                <table class="table table-responsive table-hover">
                                        <caption>Lista de Entradas</caption>
                                        <thead>
                                            <tr>
                                                <th scope="col">ID</th>
                                                <th scope="col">P.Veículo</th>
                                                <th scope="col">ID Vaga</th>
                                                <th scope="col">Entrada</th>
                                                <th scope="col">Custo</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                
                                            </tr>                
                                        </tbody>
                    </div>
                    <div class="modal-footer">
                        <button href="#" type="button" class="btn btn-success" aria-hidden="true">Confirmar</button>
                    </div>
                </div>
            </div>
        </div>
    </section>
{%- endblock content %} 
